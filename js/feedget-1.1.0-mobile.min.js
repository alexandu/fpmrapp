/*
  Feedget - RSS Feed reader jQuery Plugin for jQuery Mobile
  v1.1.0
  
  author: palroj
  site: http://codecanyon.net/item/feedget-rss-reader/3546560
*/
(function(a,b){a.fn.feedget=function(f){var h=(function(){var l=document.createElement("div");function m(n){if(n&&typeof n==="string"){n=n.replace(/<script[^>]*>([\S\s]*?)<\/script>/gmi,"");n=n.replace(/<\/?\w(?:[^"'>]|"[^"]*"|'[^']*')*>/gmi,"");l.innerHTML=n;if(l.textContent===b){n=l.innerText;l.innerText=""}else{n=l.textContent;l.textContent=""}}return n}return m})();var d=function(o,m){var n=o.getUTCDate();var r=o.getMonth()+1;var q=o.getFullYear();var l=o.getHours();var p=o.getMinutes();var s=o.getSeconds();m.year=(q.toString().length==1?"0":"")+q;m.month=(r.toString().length==1?"0":"")+r;m.day=(n.toString().length==1?"0":"")+n;m.hours=(l.toString().length==1?"0":"")+l;m.minutes=(p.toString().length==1?"0":"")+p;m.seconds=(s.toString().length==1?"0":"")+s};var k=function(n){try{var l=a("<div>"+n+"</div>").find("img").first();if(a(l).length==0){return""}else{return a(l).attr("src")}}catch(m){return""}};var g={entries:10,images:true,fulltext:true,facebook:true,twitter:true,reverse:false};var f=a.extend(g,f);var e=this;var c=Date.parse(new Date());var j=f.feed;if(f.feed.indexOf("?")==-1){j+="?x="+c}else{j+="&x="+c}var j=f.feed;var i="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&callback=?&num="+f.entries+"&q="+encodeURIComponent(j);a.getJSON(i,function(l){e.each(function(o){var n=a(this);var m=n.attr("id");n.empty();var q=a("<nav>");var p=a("<ul>").attr("data-role","listview");q.append(p);p.append('<li data-role="list-divider" role="heading">'+h(l.responseData.feed.title)+"</li>");a.each(l.responseData.feed.entries,function(F){var I=h(l.responseData.feed.entries[F].title);var x=l.responseData.feed.entries[F].link;var H=new Date(l.responseData.feed.entries[F].publishedDate);var z=h(l.responseData.feed.entries[F].contentSnippet);var B=h(l.responseData.feed.entries[F].content);var w=(f.fulltext?B:z);var v={year:"",month:"",day:"",hours:"",minutes:"",seconds:""};d(H,v);var u;if(f.reverse){u=a("<li>").prependTo(p).attr("data-element-id",F)}else{u=a("<li>").appendTo(p).attr("data-element-id",F)}var E=a("<div>");E.appendTo(u);var s=a("<h3>");var G=a("<a>").attr("href",x).attr("target","_blank").text(I).appendTo(s);var y=a("<p>").text(v.year+"/"+v.month+"/"+v.day+" - "+v.hours+":"+v.minutes+":"+v.seconds);E.append(s).append(y);if(f.images){var D=k(l.responseData.feed.entries[F].content);if(D!=""){u.append('<img id="img'+F+'" src="'+D+'" class="photopopup" /><div class="photopopupContainer" id="img'+F+'" data-role="popup" data-overlay-theme="a" data-theme="a" class="ui-content"><a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a><p><img id="'+D+'" src="'+D+'" style="max-width:100%;" /><br />'+w+"</p></div>")}}var C=a("<p>").text(w).appendTo(u);if(f.facebook){var A=a("<div>").addClass("feedget-element-social").appendTo(u);if(f.facebook){var t=a("<div>").addClass("feedget-element-facebook").html('<iframe src="//www.facebook.com/plugins/like.php?href='+x+'&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font&amp;height=21" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100px; height:21px;" allowtransparency="true"></iframe>').appendTo(A)}if(f.twitter){var r=a("<div>").addClass("feedget-element-twitter").html('<a href="https://twitter.com/share" class="twitter-share-button" data-width="1" data-url="'+x+'">Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");<\/script>').appendTo(A)}}});n.append(q);n.parents("[data-role=page]").page("destroy").page()})},"jsonp");a(document).on("click",".photopopup",function(m){var l=a("<a>").attr("href",a(this).attr("id"));a("div#"+a(this).attr("id")).popup("open")});a(".photopopup").on({popupbeforeposition:function(){var l=a(window).height()-60+"px";a(".photopopup img").css("max-height",l)}});return this}})(jQuery);